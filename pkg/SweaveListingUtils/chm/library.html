<html><head><title>Loading Packages with registering symbols for TeX package 'listing'</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" type="text/css" href="Rchm.css">
</head>
<body>

<table width="100%"><tr><td>library(SweaveListingUtils)</td><td align="right">R Documentation</td></tr></table><object type="application/x-oleobject" classid="clsid:1e2a7bd0-dab9-11d0-b93a-00c04fc99f9e">
<param name="keyword" value="R:   library">
<param name="keyword" value="R:   require">
<param name="keyword" value=" Loading Packages with registering symbols for TeX package 'listing'">
</object>


<h2>Loading Packages with registering symbols for TeX package 'listing'</h2>


<h3>Description</h3>

<p>
<code>library</code> and <code>require</code> load add-on packages.
In the masked versions of package <span class="pkg">SweaveListingUtils</span> documented here, they
also register corresponding symbols. Besides this registration, they
behave identically to the original versions of package <span class="pkg">base</span>.
Hence much of this help is also just copied from the original help page.
</p>


<h3>Usage</h3>

<pre>
library(package, help, pos = 2, lib.loc = NULL,
        character.only = FALSE, logical.return = FALSE,
        warn.conflicts = TRUE,
        keep.source = getOption("keep.source.pkgs"),
        verbose = getOption("verbose"),
        version, inSweave,
        keywordstyles, interm.keywordstyles, overwrite, intermediate)

require(package, lib.loc = NULL, quietly = FALSE,
        warn.conflicts = TRUE,
        keep.source = getOption("keep.source.pkgs"),
        character.only = FALSE, version, save = TRUE, inSweave,
        keywordstyles, interm.keywordstyles, overwrite, intermediate)
</pre>


<h3>Arguments</h3>

<table summary="R argblock">
<tr valign="top"><td><code>package, help</code></td>
<td>
the name of a package, given as a <a href="onclick="findlink('distrTEst', 'name-methods.html')" style="text-decoration: underline; color: blue; cursor: hand"">name</a> or
literal character string, or a character string, depending on
whether <code>character.only</code> is <code>FALSE</code> (default) or
<code>TRUE</code>).</td></tr>
<tr valign="top"><td><code>pos</code></td>
<td>
the position on the search list at which to attach the
loaded package.  Note that <code>.First.lib</code> may attach other
packages, and <code>pos</code> is computed <EM>after</EM> <code>.First.lib</code>
has been run.  Can also be the name of a position on the current
search list as given by <code><a onclick="findlink('base', 'search.html')" style="text-decoration: underline; color: blue; cursor: hand">search</a>()</code>.</td></tr>
<tr valign="top"><td><code>lib.loc</code></td>
<td>
a character vector describing the location of <font face="Courier New,Courier" color="#666666"><b>R</b></font>
library trees to search through, or <code>NULL</code>.  The default value
of <code>NULL</code> corresponds to all libraries currently known.
Non-existent library trees are silently ignored.</td></tr>
<tr valign="top"><td><code>character.only</code></td>
<td>
a logical indicating whether <code>package</code> or
<code>help</code> can be assumed to be character strings.</td></tr>
<tr valign="top"><td><code>version</code></td>
<td>
A character string denoting a version number of the
package to be loaded, for use with <EM>versioned installs</EM>: see
the section later in this document.</td></tr>
<tr valign="top"><td><code>logical.return</code></td>
<td>
logical.  If it is <code>TRUE</code>,  <code>FALSE</code> or
<code>TRUE</code> is returned to indicate success.</td></tr>
<tr valign="top"><td><code>warn.conflicts</code></td>
<td>
logical.  If <code>TRUE</code>, warnings are
printed about <code><a onclick="findlink('base', 'conflicts.html')" style="text-decoration: underline; color: blue; cursor: hand">conflicts</a></code> from attaching the new
package, unless that package contains an object
<code>.conflicts.OK</code>.  A conflict is a function masking a function,
or a non-function masking a non-function.
</td></tr>
<tr valign="top"><td><code>keep.source</code></td>
<td>
logical.  If <code>TRUE</code>, functions
&lsquo;keep their source&rsquo; including comments, see argument
<code>keep.source</code> to <code><a onclick="findlink('distr', 'options.html')" style="text-decoration: underline; color: blue; cursor: hand">options</a></code>.  This applies only to
the named package, and not to any packages or name spaces which might be
loaded to satisfy dependencies or imports.
<br>
This argument does not apply to packages using lazy-loading.
Whether they have kept source is determined when they are installed
(and is most likely false).
</td></tr>
<tr valign="top"><td><code>verbose</code></td>
<td>
a logical.  If <code>TRUE</code>, additional diagnostics are
printed.</td></tr>
<tr valign="top"><td><code>quietly</code></td>
<td>
a logical.  If <code>TRUE</code>, no message confirming
package loading is printed.</td></tr>
<tr valign="top"><td><code>save</code></td>
<td>
logical or environment.  If <code>TRUE</code>, a call to
<code>require</code> from the source for a package will save the name of
the required package in the variable <code>".required"</code>, allowing
function <code><a onclick="findlink('base', 'detach.html')" style="text-decoration: underline; color: blue; cursor: hand">detach</a></code> to warn if a required package is
detached. See section &lsquo;Packages that require other packages&rsquo; below.</td></tr>
<tr valign="top"><td><code>inSweave</code></td>
<td>
shall the command show Sweave behaviour (no startup messages;
instead issuing new symbols for <code>morekeywords</code> tag in
language definition of <font face="Courier New,Courier" color="#666666"><b>R</b></font> in TeX package &lsquo;<span class="file">listings</span>&rsquo;)?
By default argument is taken from
<code><a href="SweaveListingOptions.html">getSweaveListingOption</a></code>.</td></tr>
<tr valign="top"><td><code>keywordstyles</code></td>
<td>
character or missing or <code>NULL</code>; added argument in masked
versions of <code>library</code> and <code>require</code> of package
<span class="pkg">SweaveListingUtils</span>; if given, the keywordstyle to be
used by TeX package 'listings' for the symbols attached in this package
(to be found with <code>ls()</code>). Remember that special characters like \
have to be escaped. If missing, a special strategy is used to get
sensible value (see details).</td></tr>
<tr valign="top"><td><code>interm.keywordstyles</code></td>
<td>
character or missing or <code>NULL</code>; added argument in masked
versions of <code>library</code> and <code>require</code> of package
<span class="pkg">SweaveListingUtils</span>; if given, the keywordstyle to be
used by TeX package 'listings' for the symbols to be found by automatically
loaded intermediate packages (mentioned in 'depends' field of the corresponding
DESCRIPTION file). This will only be used if effective argument
<code>intermediate</code> is <code>TRUE</code>. Remember that special characters like \
have to be escaped. If missing, a special strategy is used to get
sensible value (see details).</td></tr>
<tr valign="top"><td><code>overwrite</code></td>
<td>
logical or missing or <code>NULL</code>; added argument in masked
versions of <code>library</code> and <code>require</code> of package
<span class="pkg">SweaveListingUtils</span>; if missing, the corresponding global option is read
out by <code><a href="SweaveListingOptions.html">getSweaveListingOption</a></code>. Let us call the corresponding
possibly imputed value <EM>effective</EM> value. If this effective value is
<code>TRUE</code>, before registering a new symbol for TeX package 'listings',
we first check whether this symbol had already been registered in
the original 'listings'-language definition of  <font face="Courier New,Courier" color="#666666"><b>R</b></font> in file &lsquo;<span class="file">lstlang3.sty</span>&rsquo;
[which we have copied to the internal (un-exported) constant
<code>.keywordsR</code>] and if so do not include the symbol once again; if the value is <code>FALSE</code>,
no matter of the original language definition all symbols to be found by <code>ls()</code>
are registered and hence typeset in the corresponding package-keywordstyle.</td></tr>
<tr valign="top"><td><code>intermediate</code></td>
<td>
logical or missing or <code>NULL</code>; added argument in masked
versions of <code>library</code> and <code>require</code> of package
<span class="pkg">SweaveListingUtils</span>; if missing, the corresponding global option is read
out by <code><a href="SweaveListingOptions.html">getSweaveListingOption</a></code>. If the effective value is
<code>TRUE</code>, also the symbols to be found in newly, automatically loaded
packages (loaded, because the required/"library"-ed package features them
in its corresponding <code>Depends</code> field in its DESCRIPTION file)
are registered for TeX package 'listings'.</td></tr>
</table>

<h3>Details</h3>

<p>
<code>library</code> and <code>require</code> are masked versions of the original
versions in package <span class="pkg">base</span>. This masking is necessary to allow for
extra arguments <code>keywordstyles</code>, <code>interm.keywordstyles</code>,
<code>overwrite</code>, <code>intermediate</code>. Hence please confer
<code><a onclick="findlink('base', 'library.html')" style="text-decoration: underline; color: blue; cursor: hand">library</a></code>, <code><a onclick="findlink('base', 'require.html')" style="text-decoration: underline; color: blue; cursor: hand">require</a></code>.<br>
</p>
<p>
If argument <code>inSweave</code> is <code>FALSE</code> or if argument
<code>inSweave</code> is missing and the corresponding global
option <code>getSweaveListingOption("inSweave")</code> is <code>FALSE</code>,
then <code>library</code> and <code>require</code> behave exactly as the <span class="pkg">base</span>
package versions; only if the effective argument is <code>TRUE</code>,
the corresponding startup-messages are suppressed, and the TeX
code for registering all new symbols to be found with <code>ls</code> as
<code>morekeywords</code> for the <font face="Courier New,Courier" color="#666666"><b>R</b></font> language definition in TeX package
&lsquo;<span class="file">listings</span>&rsquo; is issued (and hence can be used in &lsquo;<span class="file">.Rnw</span>&rsquo; files.
</p>
<p>
The strategy to fill arguments <code>keywordstyles</code> and
<code>interm.keywordstyles</code> if missing is as follows: First we check whether
for the corresponding package, there is an enty in the global
option variable <code>.tobeDefinedPkgs</code> (which is a matrix residing in the
package namespace with one column of package names and one column of
corresponding keywordstyle format strings)
and if so use its corresponding keywordstyle; else we use option
<code>Keywordstyles</code> resp. <code>interm.Keywordstyles</code> (which we get
by <code>getSweaveListingOption</code>). New entries in the global variable
<code>.tobeDefinedPkgs</code> may be appended by <code><a href="setToBeDefinedPkgs.html">setToBeDefinedPkgs</a></code>.<br>
</p>
<p>
The masked versions work as follows: first the call is written to an
object and split into a <span class="pkg">base</span>-package-part and into the extra arguments
mentioned above. Then we call <code>base::&lt;fct&gt;</code> where <code>&lt;fct&gt;</code> is either
<code>require</code> or <code>library</code>. By noting the list of attached packages
before and after this call we also get hand on the intermediate packages,
which are automatically attached packages by dependence. After this call
we register the new symbols by corresponding calls to
<code><a href="lstsetLanguage.html">lstsetLanguage</a></code>.
</p>
<p>
For use in an <code>.Rnw</code> file, the call to <code>require</code> or <code>library</code>
should be wrapped into a corresponding Sweave chunk in the form
<pre>
&lt;&lt; /chunkname/, results=tex, echo=TRUE&gt;&gt;=
require( ..... )
@
</pre>
,for example
<pre>
&lt;&lt; distrRequire, results=tex, echo=TRUE&gt;&gt;=
require(distr)
@
</pre>
In order to unmask the original versions of <code>library</code> and <code>require</code>
again after Sweave-ing your <code>.Rnw</code> file, at the end of your <code>.Rnw</code>
file you should include an Sweave chunk like
<pre>
&lt;&lt;cleanup, echo=FALSE&gt;&gt;=
unloadNamespace("SweaveListingUtils")
@
</pre>
</p>


<h3>Value</h3>

<p>
as the unmasked versions.</p>

<h3>See Also</h3>

<p>
<code><a onclick="findlink('base', 'library.html')" style="text-decoration: underline; color: blue; cursor: hand">library</a></code>.
</p>


<h3>Examples</h3>

<pre>
require(survival)
</pre>

<script Language="JScript">
function findlink(pkg, fn) {
var Y, link;
Y = location.href.lastIndexOf("\\") + 1;
link = location.href.substring(0, Y);
link = link + "../../" + pkg + "/chtml/" + pkg + ".chm::/" + fn;
location.href = link;
}
</script>


<hr><div align="center">[Package <em>SweaveListingUtils</em> version 0.3 <a href="00Index.html">Index</a>]</div>

</body></html>
